# Suggested flow as seen in PowerApps ALM Labs
# 1. Pack solution
# 2. Import solution into clean build environment
# 3. Export solution as managed artifact
# 4. Publish artifact

parameters: 
  solutionPath: ''
  solutionName: ''

steps:
  - template: install-powerapps-tools.yml 

  - task: PowerAppsPackSolution@0
    inputs:
      SolutionSourceFolder: '$(Build.SourcesDirectory)\${{ parameters.solutionPath }}\${{ parameters.solutionName }}'
      SolutionOutputFile: '$(Pipeline.Workspace)\${{ parameters.solutionName }}.zip'
      SolutionType: Unmanaged